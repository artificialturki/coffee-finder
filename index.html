<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>â˜•ï¸ Coffee Finder Pro â€” KSA & UAE</title>
<meta name="description" content="Coffee Finder Pro â€” Ø£Ù‚ÙˆÙ‰ Ø£Ø¯Ø§Ø© Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‚Ø§Ù‡ÙŠ ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØ§Ù„Ø¥Ù…Ø§Ø±Ø§Øª Ø¨Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ©ØŒ ÙÙ„Ø§ØªØ±ØŒ Ù…ÙØ¶Ù„Ø©ØŒ Ø«ÙŠÙ…Ø§ØªØŒ ÙˆØ®Ù„ÙÙŠØ© Ø®ÙŠØ§Ù„ÙŠØ©." />
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.8em' font-size='80'>â˜•</text></svg>">

<!-- Ù…ÙƒØªØ¨Ø§Øª -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
<link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet">
<link href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" rel="stylesheet">

<style>
:root{
  --bg:#0b1411;--panel:#12221a;--accent:#39eba1;--text:#f5fff9;
}
[data-theme="light"]{--bg:#ffffff;--panel:#f0f0f0;--accent:#007bff;--text:#111;}
[data-theme="neon"]{--bg:#000;--panel:#111;--accent:#ff00ff;--text:#0ff;}

body{background:var(--bg);color:var(--text);font-family:"Cairo",sans-serif;overflow-x:hidden;}
header{background:var(--panel);padding:.8rem;border-bottom:2px solid var(--accent);}
.brand{font-weight:900;font-size:1.8rem;color:var(--accent);cursor:pointer;text-shadow:0 0 12px var(--accent);}

/* Ø®Ù„ÙÙŠØ© Ù†Ø¬ÙˆÙ… */
.bg-stars,.bg-stars-2{position:fixed;inset:0;z-index:-1;pointer-events:none}
.bg-stars{background-image:radial-gradient(2px 2px at 20% 20%, #aaffee66 50%, transparent 52%),radial-gradient(2px 2px at 80% 40%, #aaffee55 50%, transparent 52%),radial-gradient(1.5px 1.5px at 40% 80%, #aaffee55 50%, transparent 52%);}
.bg-stars-2{opacity:.4;filter:blur(.5px)}

/* Ø®Ø±ÙŠØ·Ø© */
#map{height:60vh;border-radius:12px;margin-top:1rem;}
.map-cup{position:relative;width:28px;height:20px;border-radius:6px;background:#6d4c41;border:2px solid #3e2723;}
.map-cup:after{content:'';position:absolute;top:-6px;left:4px;width:20px;height:6px;border-radius:6px 6px 0 0;background:#fff;}
.steam{position:absolute;top:-12px;left:12px;width:4px;height:12px;background:linear-gradient(to top,rgba(255,255,255,.7),transparent);animation:steamUp 2s infinite ease-in-out;}
@keyframes steamUp{0%{opacity:0;transform:translateY(5px);}50%{opacity:1;}100%{opacity:0;transform:translateY(-10px);}}

/* Ù†ØªØ§Ø¦Ø¬ */
.results{max-height:50vh;overflow:auto;}
.card-cafe{background:var(--panel);border:1px solid var(--accent);border-radius:12px;padding:1rem;margin:.5rem 0;}
.star i{color:gold;}
.favorite{cursor:pointer;color:#999;}
.favorite.active{color:red;}

/* PWA icons */
.apps{margin-top:1rem;display:flex;gap:1rem;justify-content:center;}
.apps img{height:40px;filter:grayscale(1);opacity:.8;}

footer{text-align:center;padding:1rem;font-size:.8rem;color:var(--text);}
.subscribe{background:var(--accent);color:#000;padding:.6rem 1rem;border-radius:20px;font-weight:bold;margin:1rem auto;display:inline-block;cursor:pointer;}
</style>
</head>
<body>
<div class="bg-stars" id="stars1"></div><div class="bg-stars bg-stars-2" id="stars2"></div>

<header class="d-flex justify-content-between align-items-center">
  <div class="brand">Coffee Finder Pro</div>
  <div>
    <select id="lang" class="form-select form-select-sm d-inline-block" style="width:auto;">
      <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
      <option value="en">English</option>
      <option value="fr">FranÃ§ais</option>
      <option value="es">EspaÃ±ol</option>
    </select>
    <select id="country" class="form-select form-select-sm d-inline-block" style="width:auto;">
      <option value="sa">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option>
      <option value="ae">ğŸ‡¦ğŸ‡ª Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</option>
    </select>
    <button class="btn btn-sm btn-success" id="themeBtn"><i class="fa-solid fa-palette"></i></button>
  </div>
</header>

<main class="container my-3">
  <!-- Ø¨Ø­Ø« -->
  <div class="d-flex gap-2">
    <input id="query" class="form-control" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¯ÙŠÙ†Ø© (Ø­ØªÙ‰ 50 ÙƒÙ…)">
    <button id="searchBtn" class="btn btn-success"><i class="fa fa-search"></i></button>
  </div>

  <!-- Ø®Ø±ÙŠØ·Ø© -->
  <div id="map"></div>

  <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…ØªØ§Ø¬Ø± -->
  <div class="apps">
    <img src="https://upload.wikimedia.org/wikipedia/commons/5/5f/Available_on_the_App_Store_%28black%29_SVG.svg" alt="App Store">
    <img src="https://upload.wikimedia.org/wikipedia/commons/c/cd/Get_it_on_Google_play.svg" alt="Google Play">
  </div>

  <!-- Ø²Ø± Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ -->
  <div class="subscribe">Subscribe Now â­</div>

  <!-- Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
  <h4 class="mt-4">Ø§Ù„Ù†ØªØ§Ø¦Ø¬:</h4>
  <div class="results" id="results"></div>

  <!-- Ø§Ù„Ù…ÙØ¶Ù„Ø© -->
  <h4 class="mt-4">Ø§Ù„Ù…ÙØ¶Ù„Ø© â¤ï¸</h4>
  <div class="results" id="favorites"></div>
</main>

<footer>Â© 2025 Coffee Finder Pro â€” KSA & UAE</footer>

<audio id="clickSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

<!-- Ù…ÙƒØªØ¨Ø§Øª -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
<script>
const map=L.map('map').setView([24.7136,46.6753],6);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; OpenStreetMap'}).addTo(map);
const markers=L.markerClusterGroup().addTo(map);

function addCafe(lat,lng,name,rating){
  const cupIcon=L.divIcon({className:'',html:'<div class="map-cup"><div class="steam"></div></div>',iconSize:[30,30],iconAnchor:[15,15]});
  const m=L.marker([lat,lng],{icon:cupIcon}).bindPopup(`<b>${name}</b><br>â­ ${rating} <i class="fa fa-heart favorite"></i>`);
  m.on("popupopen",()=>{
    const favIcon=document.querySelector(".leaflet-popup .favorite");
    favIcon.onclick=()=>toggleFavorite(name,rating);
  });
  markers.addLayer(m);
  renderResult(name,rating);
}

function renderResult(name,rating){
  const div=document.createElement("div");
  div.className="card-cafe";
  div.innerHTML=`<div><strong>${name}</strong> <i class="fa fa-heart favorite"></i></div>
  <div class="star">${"â˜…".repeat(rating)}${"â˜†".repeat(5-rating)}</div>`;
  div.querySelector(".favorite").onclick=()=>toggleFavorite(name,rating);
  document.getElementById("results").appendChild(div);
}

function toggleFavorite(name,rating){
  let favs=JSON.parse(localStorage.getItem("favorites")||"[]");
  const exists=favs.find(f=>f.name===name);
  if(exists){favs=favs.filter(f=>f.name!==name);}
  else{favs.push({name,rating});}
  localStorage.setItem("favorites",JSON.stringify(favs));
  renderFavorites();
}

function renderFavorites(){
  const favs=JSON.parse(localStorage.getItem("favorites")||"[]");
  const cont=document.getElementById("favorites");
  cont.innerHTML="";
  favs.forEach(f=>{
    cont.innerHTML+=`<div class="card-cafe"><strong>${f.name}</strong><div class="star">${"â˜…".repeat(f.rating)}${"â˜†".repeat(5-f.rating)}</div></div>`;
  });
}

function playClick(){document.getElementById("clickSound").play();}

document.getElementById("searchBtn").onclick=()=>{playClick();alert("Ø¨Ø­Ø« ØªØ¬Ø±ÙŠØ¨ÙŠ: Ø£Ø¶Ù Ø¨ÙŠØ§Ù†Ø§ØªÙƒ!");};
document.getElementById("themeBtn").onclick=()=>{toggleTheme();playClick();};

let themeIndex=0,themes=["","light","neon"];
function toggleTheme(){themeIndex=(themeIndex+1)%themes.length;document.body.setAttribute("data-theme",themes[themeIndex]);}

// Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
addCafe(24.7136,46.6753,"Starbucks Riyadh",5);
addCafe(25.2048,55.2708,"Costa Dubai",4);

renderFavorites();
</script>
</body>
</html>
