<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coffee Finder Pro ☕ | Discover the Best Cafés Worldwide</title>
  <meta name="description" content="Find the perfect café anywhere in the world with our advanced coffee location service">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>☕</text></svg>">

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  
  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <style>
    :root {
      --primary: #3c2f2f;
      --secondary: #6d4c41;
      --accent: #c86b40;
      --light: #f4f1ea;
      --dark: #2a211c;
      --success: #5cb85c;
      --warning: #f0ad4e;
    }
    
    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #f9f9f9 0%, #f4f1ea 100%);
      color: var(--dark);
      min-height: 100vh;
    }
    
    /* Header Styles */
    header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      padding: 1.5rem 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }
    
    header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23c86b4044' fill-rule='evenodd'/%3E%3C/svg%3E");
      opacity: 0.05;
    }
    
    .logo {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .tagline {
      font-weight: 300;
      font-size: 1.1rem;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto;
    }
    
    /* Search Section */
    .search-section {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      margin-top: -1.5rem;
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      position: relative;
      z-index: 10;
    }
    
    .search-input-group {
      position: relative;
    }
    
    .search-input-group .form-control {
      padding-left: 3rem;
      border-radius: 50px;
      border: 2px solid #e9ecef;
      transition: all 0.3s ease;
    }
    
    .search-input-group .form-control:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 0.25rem rgba(200, 107, 64, 0.25);
    }
    
    .search-icon {
      position: absolute;
      left: 1.2rem;
      top: 50%;
      transform: translateY(-50%);
      color: #6c757d;
      z-index: 5;
    }
    
    .btn-search {
      background: linear-gradient(135deg, var(--accent) 0%, #e25a3b 100%);
      border: none;
      border-radius: 50px;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(200, 107, 64, 0.3);
    }
    
    .btn-search:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(200, 107, 64, 0.4);
    }
    
    /* Map Styles */
    #map {
      height: 65vh;
      width: 100%;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      z-index: 1;
      margin: 1.5rem 0;
    }
    
    /* Results Section */
    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--light);
    }
    
    .sort-options {
      display: flex;
      gap: 0.5rem;
    }
    
    .cafe-card {
      border: none;
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      margin-bottom: 1.5rem;
    }
    
    .cafe-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 20px rgba(0,0,0,0.1);
    }
    
    .cafe-image {
      height: 160px;
      background: linear-gradient(45deg, #8b6b61, #a1887f);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 3rem;
    }
    
    .cafe-details {
      padding: 1.25rem;
    }
    
    .cafe-name {
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }
    
    .cafe-meta {
      display: flex;
      gap: 1rem;
      margin-bottom: 0.75rem;
      font-size: 0.9rem;
    }
    
    .cafe-meta span {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      color: #6c757d;
    }
    
    .cafe-description {
      color: #495057;
      margin-bottom: 1rem;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    
    .cafe-actions {
      display: flex;
      gap: 0.5rem;
    }
    
    .btn-action {
      flex: 1;
      border-radius: 50px;
      font-size: 0.85rem;
      padding: 0.5rem 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.4rem;
    }
    
    /* Loading Animation */
    .loader {
      display: none;
      text-align: center;
      padding: 2rem;
    }
    
    .coffee-loader {
      display: inline-block;
      position: relative;
      width: 80px;
      height: 80px;
    }
    
    .coffee-loader div {
      display: inline-block;
      position: absolute;
      left: 8px;
      width: 16px;
      background: var(--accent);
      animation: coffee-loader 1.2s cubic-bezier(0, 0.5, 0.5, 1) infinite;
    }
    
    .coffee-loader div:nth-child(1) {
      left: 8px;
      animation-delay: -0.24s;
    }
    
    .coffee-loader div:nth-child(2) {
      left: 32px;
      animation-delay: -0.12s;
    }
    
    .coffee-loader div:nth-child(3) {
      left: 56px;
      animation-delay: 0;
    }
    
    @keyframes coffee-loader {
      0% {
        top: 8px;
        height: 64px;
      }
      50%, 100% {
        top: 24px;
        height: 32px;
      }
    }
    
    /* No Results */
    .no-results {
      text-align: center;
      padding: 3rem 1rem;
      color: #6c757d;
    }
    
    .no-results i {
      font-size: 4rem;
      margin-bottom: 1rem;
      color: #dee2e6;
    }
    
    /* Footer */
    footer {
      background: var(--dark);
      color: white;
      padding: 2rem 0;
      margin-top: 3rem;
    }
    
    .attribution {
      font-size: 0.9rem;
      opacity: 0.7;
      text-align: center;
      margin-top: 1rem;
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .logo {
        font-size: 2rem;
      }
      
      .tagline {
        font-size: 0.95rem;
      }
      
      .search-section {
        padding: 1rem;
      }
      
      .cafe-card {
        margin-bottom: 1rem;
      }
      
      .cafe-actions {
        flex-direction: column;
      }
      
      #map {
        height: 50vh;
      }
    }
    
    /* Animation Classes */
    .animate-fade-in {
      animation: fadeIn 0.5s ease-in;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* Custom Leaflet Popup */
    .leaflet-popup-content-wrapper {
      border-radius: 12px;
      padding: 0.2rem;
    }
    
    .leaflet-popup-content {
      margin: 0.8rem;
      font-size: 0.95rem;
      line-height: 1.4;
    }
    
    .custom-popup {
      text-align: center;
      padding: 0.5rem;
    }
    
    .custom-popup h6 {
      margin: 0.5rem 0;
      color: var(--primary);
      font-weight: 700;
    }
    
    .custom-popup p {
      margin: 0.25rem 0;
      font-size: 0.85rem;
      color: #6c757d;
    }
  </style>
</head>
<body>
  <!-- Header Section -->
  <header class="text-center">
    <div class="container">
      <div class="logo animate__animated animate__fadeInDown">
        <i class="fas fa-mug-hot"></i> Coffee Finder Pro
      </div>
      <p class="tagline animate__animated animate__fadeIn animate__delay-1s">
        Discover the perfect café anywhere in the world. Powered by OpenStreetMap & Overpass API
      </p>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container">
    <!-- Search Section -->
    <section class="search-section animate__animated animate__fadeInUp animate__delay-1s">
      <div class="row">
        <div class="col-md-8">
          <div class="search-input-group">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="locationInput" class="form-control form-control-lg" 
                   placeholder="Enter city, country or address (e.g. Paris, France)">
          </div>
        </div>
        <div class="col-md-4 mt-2 mt-md-0">
          <button id="searchBtn" class="btn btn-search w-100 h-100">
            <i class="fas fa-search-location"></i> Find Coffee
          </button>
        </div>
      </div>
      
      <div class="mt-3">
        <select id="locationChoices" class="form-select d-none"></select>
      </div>
      
      <div class="d-flex justify-content-center mt-3">
        <button id="currentLocationBtn" class="btn btn-outline-secondary">
          <i class="fas fa-location-arrow"></i> Use My Current Location
        </button>
      </div>
    </section>

    <!-- Map Section -->
    <section class="mt-4">
      <div id="map"></div>
    </section>

    <!-- Loader -->
    <div id="loader" class="loader">
      <div class="coffee-loader"><div></div><div></div><div></div></div>
      <p class="mt-2">Searching for the best cafés...</p>
    </div>

    <!-- Results Section -->
    <section class="results-section mt-4">
      <div class="results-header">
        <h3><i class="fas fa-list"></i> Café Results</h3>
        <div class="sort-options">
          <select id="sortOptions" class="form-select form-select-sm">
            <option value="distance">Sort by Distance</option>
            <option value="name">Sort by Name</option>
            <option value="rating">Sort by Rating</option>
          </select>
        </div>
      </div>
      
      <div id="resultsContainer" class="row">
        <!-- Results will be populated here -->
      </div>
      
      <div id="noResults" class="no-results d-none">
        <i class="fas fa-coffee"></i>
        <h4>No cafés found nearby</h4>
        <p>Try searching in a different area or broaden your search</p>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container text-center">
      <p>☕ Made with love for coffee lovers around the world</p>
      <p class="attribution">
        © <span id="currentYear"></span> Coffee Finder Pro | 
        Data from <a href="https://www.openstreetmap.org/" target="_blank">OpenStreetMap</a> & 
        <a href="https://overpass-api.de/" target="_blank">Overpass API</a>
      </p>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    // Initialize the map
    const map = L.map('map').setView([20, 0], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Set current year in footer
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    let markers = [];
    let currentLocation = null;
    let cafes = [];

    // Initialize the application
    document.addEventListener('DOMContentLoaded', function() {
      // Add event listeners
      document.getElementById('searchBtn').addEventListener('click', searchLocation);
      document.getElementById('currentLocationBtn').addEventListener('click', getCurrentLocation);
      document.getElementById('locationInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') searchLocation();
      });
      
      document.getElementById('sortOptions').addEventListener('change', sortCafes);
      
      // Add a nice subtle animation to the header
      setTimeout(() => {
        document.querySelector('header').classList.add('animate__fadeIn');
      }, 100);
    });

    // Get user's current location
    function getCurrentLocation() {
      if (!navigator.geolocation) {
        alert('Geolocation is not supported by your browser');
        return;
      }
      
      showLoader();
      
      navigator.geolocation.getCurrentPosition(
        function(position) {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          currentLocation = { lat, lon };
          
          // Set map view
          map.setView([lat, lon], 14);
          
          // Reverse geocode to get location name
          reverseGeocode(lat, lon);
          
          // Search for cafes
          searchCafes(lat, lon);
        },
        function(error) {
          hideLoader();
          alert('Unable to retrieve your location. Please try again or search manually.');
          console.error('Geolocation error:', error);
        }
      );
    }

    // Reverse geocode coordinates to get location name
    async function reverseGeocode(lat, lon) {
      try {
        const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
        const data = await response.json();
        
        if (data && data.display_name) {
          document.getElementById('locationInput').value = data.display_name.split(',').slice(0, 3).join(',');
        }
      } catch (error) {
        console.error('Reverse geocoding failed:', error);
      }
    }

    // Search for location
    async function searchLocation() {
      const query = document.getElementById("locationInput").value.trim();
      if (!query) {
        showAlert('Please enter a location!', 'warning');
        return;
      }
      
      showLoader();
      
      try {
        const geoRes = await fetch(`https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&limit=5&q=${encodeURIComponent(query)}`);
        const geoData = await geoRes.json();

        const choices = document.getElementById("locationChoices");
        choices.innerHTML = '';

        if (geoData.length === 0) {
          choices.classList.add("d-none");
          hideLoader();
          showAlert('No locations found. Please try a different search term.', 'info');
          return;
        }

        // If only one result, use it directly
        if (geoData.length === 1) {
          const loc = geoData[0];
          currentLocation = { lat: parseFloat(loc.lat), lon: parseFloat(loc.lon) };
          map.setView([loc.lat, loc.lon], 14);
          searchCafes(loc.lat, loc.lon);
          choices.classList.add("d-none");
        } else {
          // Multiple results - show dropdown
          geoData.forEach((loc, idx) => {
            const opt = document.createElement("option");
            opt.value = `${loc.lat},${loc.lon}`;
            opt.textContent = loc.display_name;
            choices.appendChild(opt);
          });
          
          choices.classList.remove("d-none");
          hideLoader();
          
          // Add event listener for when user selects a location
          choices.onchange = function() {
            if (!this.value) return;
            showLoader();
            const [lat, lon] = this.value.split(",");
            currentLocation = { lat: parseFloat(lat), lon: parseFloat(lon) };
            map.setView([lat, lon], 14);
            searchCafes(lat, lon);
            choices.classList.add("d-none");
          };
        }
      } catch (error) {
        hideLoader();
        console.error('Search error:', error);
        showAlert('An error occurred while searching. Please try again.', 'danger');
      }
    }

    // Search for cafes around a location
    async function searchCafes(lat, lon) {
      try {
        // Clear previous markers and results
        clearMarkers();
        clearResults();
        
        const query = `
          [out:json];
          node["amenity"="cafe"](around:2000,${lat},${lon});
          out;
        `;
        
        const overRes = await fetch("https://overpass-api.de/api/interpreter", {
          method: "POST",
          body: query
        });
        
        const overData = await overRes.json();
        hideLoader();
        
        if (overData.elements.length === 0) {
          document.getElementById('noResults').classList.remove('d-none');
          return;
        }
        
        document.getElementById('noResults').classList.add('d-none');
        
        // Process and display cafes
        cafes = overData.elements.map(place => {
          const name = place.tags.name || "Unnamed Café";
          const distance = calculateDistance(lat, lon, place.lat, place.lon);
          
          return {
            id: place.id,
            name: name,
            lat: place.lat,
            lon: place.lon,
            distance: distance,
            tags: place.tags || {}
          };
        });
        
        // Sort by distance by default
        cafes.sort((a, b) => a.distance - b.distance);
        
        // Display cafes
        displayCafes();
        addMarkersToMap();
        
      } catch (error) {
        hideLoader();
        console.error('Cafe search error:', error);
        showAlert('Failed to search for cafes. Please try again.', 'danger');
      }
    }

    // Calculate distance between two coordinates (Haversine formula)
    function calculateDistance(lat1, lon1, lat2, lon2) {
      const R = 6371; // Earth's radius in km
      const dLat = deg2rad(lat2 - lat1);
      const dLon = deg2rad(lon2 - lon1);
      
      const a = 
        Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
        Math.sin(dLon/2) * Math.sin(dLon/2);
      
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
      const distance = R * c; // Distance in km
      
      return distance;
    }

    function deg2rad(deg) {
      return deg * (Math.PI/180);
    }

    // Display cafes in the results container
    function displayCafes() {
      const container = document.getElementById('resultsContainer');
      container.innerHTML = '';
      
      cafes.forEach(cafe => {
        const col = document.createElement('div');
        col.className = 'col-md-6 col-lg-4 animate-fade-in';
        
        // Generate a random rating for demo purposes
        const rating = (Math.random() * 2 + 3).toFixed(1);
        const reviewCount = Math.floor(Math.random() * 100) + 10;
        
        col.innerHTML = `
          <div class="cafe-card card">
            <div class="cafe-image">
              <i class="fas fa-coffee"></i>
            </div>
            <div class="cafe-details">
              <h5 class="cafe-name">${cafe.name}</h5>
              <div class="cafe-meta">
                <span><i class="fas fa-map-marker-alt"></i> ${cafe.distance.toFixed(1)} km</span>
                <span><i class="fas fa-star"></i> ${rating} (${reviewCount})</span>
              </div>
              <p class="cafe-description">${generateDescription(cafe.tags)}</p>
              <div class="cafe-actions">
                <a href="https://www.google.com/maps/dir/?api=1&destination=${cafe.lat},${cafe.lon}" 
                   target="_blank" class="btn btn-action btn-primary">
                  <i class="fas fa-directions"></i> Directions
                </a>
                <button class="btn btn-action btn-outline-secondary" onclick="focusOnCafe(${cafe.lat}, ${cafe.lon})">
                  <i class="fas fa-map-pin"></i> View on Map
                </button>
              </div>
            </div>
          </div>
        `;
        
        container.appendChild(col);
      });
    }

    // Generate a description based on available tags
    function generateDescription(tags) {
      if (tags.cuisine) {
        return `Serving ${tags.cuisine} cuisine${tags.outdoor_seating ? ' with outdoor seating' : ''}.`;
      } else if (tags['internet_access'] === 'yes') {
        return 'A cozy café with Wi-Fi access. Perfect for working or relaxing.';
      } else {
        return 'A lovely local café offering a variety of coffee and snacks.';
      }
    }

    // Add markers to the map
    function addMarkersToMap() {
      cafes.forEach(cafe => {
        // Create a custom icon
        const icon = L.divIcon({
          html: '<i class="fas fa-coffee"></i>',
          className: 'custom-coffee-marker',
          iconSize: [30, 30],
          iconAnchor: [15, 15]
        });
        
        const marker = L.marker([cafe.lat, cafe.lon], { icon: icon }).addTo(map);
        
        // Create popup content
        const popupContent = `
          <div class="custom-popup">
            <h6>${cafe.name}</h6>
            <p><i class="fas fa-map-marker-alt"></i> ${cafe.distance.toFixed(1)} km away</p>
            <a href="https://www.google.com/maps/dir/?api=1&destination=${cafe.lat},${cafe.lon}" 
               target="_blank" class="btn btn-sm btn-primary mt-1">
              <i class="fas fa-directions"></i> Directions
            </a>
          </div>
        `;
        
        marker.bindPopup(popupContent);
        markers.push(marker);
      });
    }

    // Focus on a specific cafe on the map
    function focusOnCafe(lat, lon) {
      map.setView([lat, lon], 16);
      
      // Find and open the popup for this cafe
      markers.forEach(marker => {
        const markerLatLng = marker.getLatLng();
        if (markerLatLng.lat === lat && markerLatLng.lng === lon) {
          marker.openPopup();
        }
      });
    }

    // Sort cafes based on selected option
    function sortCafes() {
      const sortBy = document.getElementById('sortOptions').value;
      
      if (sortBy === 'name') {
        cafes.sort((a, b) => a.name.localeCompare(b.name));
      } else if (sortBy === 'rating') {
        // For demo, we'll use random ratings
        cafes.sort((a, b) => {
          const aRating = parseFloat(a.tags.rating || (Math.random() * 2 + 3).toFixed(1));
          const bRating = parseFloat(b.tags.rating || (Math.random() * 2 + 3).toFixed(1));
          return bRating - aRating;
        });
      } else {
        // Default: sort by distance
        cafes.sort((a, b) => a.distance - b.distance);
      }
      
      displayCafes();
    }

    // Clear all markers from the map
    function clearMarkers() {
      markers.forEach(marker => map.removeLayer(marker));
      markers = [];
    }

    // Clear results from the container
    function clearResults() {
      document.getElementById('resultsContainer').innerHTML = '';
    }

    // Show loader
    function showLoader() {
      document.getElementById('loader').style.display = 'block';
      document.getElementById('resultsContainer').innerHTML = '';
      document.getElementById('noResults').classList.add('d-none');
    }

    // Hide loader
    function hideLoader() {
      document.getElementById('loader').style.display = 'none';
    }

    // Show alert message
    function showAlert(message, type) {
      // Create alert element
      const alertDiv = document.createElement('div');
      alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
      alertDiv.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      `;
      
      // Add to page
      document.querySelector('.search-section').appendChild(alertDiv);
      
      // Auto remove after 5 seconds
      setTimeout(() => {
        if (alertDiv.parentNode) {
          alertDiv.classList.remove('show');
          setTimeout(() => alertDiv.remove(), 150);
        }
      }, 5000);
    }
  </script>
</body>
</html>
