<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coffee Finder Pro</title>
  <style>
    body { margin:0; font-family: Arial, sans-serif; display:flex; flex-direction:column; height:100vh; }
    header { background:#3c2f2f; color:#fff; padding:1rem; text-align:center; }
    #searchBar { display:flex; padding:1rem; gap:0.5rem; background:#fafafa; }
    #searchBar input { flex:1; padding:0.6rem; border:1px solid #ccc; border-radius:4px; }
    #searchBar button { background:#3c2f2f; color:#fff; border:none; padding:0.6rem 1.2rem; border-radius:4px; cursor:pointer; }
    #searchBar button:hover { background:#5a4444; }
    #container { flex:1; display:flex; }
    #map { flex:2; }
    #results { flex:1; overflow-y:auto; border-left:1px solid #ccc; padding:1rem; background:#fff; }
    .place { margin-bottom:1rem; padding-bottom:1rem; border-bottom:1px solid #eee; }
    .place h3 { margin:0; font-size:1.1rem; }
    .place p { margin:0.2rem 0; color:#555; }
  </style>
</head>
<body>
  <header>
    <h1>‚òï Coffee Finder Pro</h1>
    <p>Search caf√©s anywhere in the world üåç</p>
  </header>

  <div id="searchBar">
    <input type="text" id="locationInput" placeholder="Enter city, country (e.g. Riyadh, Saudi Arabia)">
    <button onclick="searchCoffee()">Search</button>
  </div>

  <div id="container">
    <div id="map"></div>
    <div id="results"><h2>Results</h2><div id="list"></div></div>
  </div>

  <script>
    let map, service, geocoder, infowindow;
    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 20, lng: 0 }, zoom: 2
      });
      geocoder = new google.maps.Geocoder();
      infowindow = new google.maps.InfoWindow();
    }

    function searchCoffee() {
      const location = document.getElementById("locationInput").value;
      if (!location) { alert("Enter a city and country!"); return; }

      geocoder.geocode({ address: location }, (results, status) => {
        if (status !== "OK" || !results[0]) {
          alert("Location not found.");
          return;
        }
        map.setCenter(results[0].geometry.location);
        map.setZoom(14);

        const request = {
          location: results[0].geometry.location,
          radius: 3000,
          type: ["cafe"],
          keyword: "coffee"
        };

        service = new google.maps.places.PlacesService(map);
        service.nearbySearch(request, displayResults);
      });
    }

    function displayResults(results, status) {
      const listDiv = document.getElementById("list");
      listDiv.innerHTML = "";
      if (status !== google.maps.places.PlacesServiceStatus.OK || !results) {
        listDiv.innerHTML = "<p>No caf√©s found.</p>";
        return;
      }

      results.forEach(place => {
        // Marker
        const marker = new google.maps.Marker({
          map, position: place.geometry.location, title: place.name
        });
        marker.addListener("click", () => {
          infowindow.setContent(`<b>${place.name}</b><br>${place.vicinity || ""}`);
          infowindow.open(map, marker);
        });

        // Sidebar
        const div = document.createElement("div");
        div.className = "place";
        div.innerHTML = `
          <h3>${place.name}</h3>
          <p>${place.vicinity || "No address available"}</p>
          <p>‚≠ê ${place.rating || "N/A"} (${place.user_ratings_total || 0} reviews)</p>
        `;
        listDiv.appendChild(div);
      });
    }
  </script>

  <!-- Replace YOUR_API_KEY with your real Google Maps API Key -->
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places&callback=initMap">
  </script>
</body>
</html>
